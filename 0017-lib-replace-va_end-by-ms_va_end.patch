From e0e8d8ecbfbd7bb8ab084d32667952d1743446a0 Mon Sep 17 00:00:00 2001
From: Heinrich Schuchardt <heinrich.schuchardt@canonical.com>
Date: Mon, 23 Aug 2021 11:21:26 +0200
Subject: [PATCH 17/19] lib: replace va_end by ms_va_end

Shim uses ms_va_end() instead of va_end().

Signed-off-by: Heinrich Schuchardt <heinrich.schuchardt@canonical.com>
---
 lib/hand.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

diff --git a/lib/hand.c b/lib/hand.c
index 93a383c..0447ddc 100644
--- a/lib/hand.c
+++ b/lib/hand.c
@@ -488,7 +488,7 @@ LibInstallProtocolInterfaces (
 
         Index += 1;
     }
-    va_end (args);
+    ms_va_end (args);
 
     //
     // If there was an error, remove all the interfaces that were
@@ -507,7 +507,7 @@ LibInstallProtocolInterfaces (
         }        
 
         *Handle = OldHandle;
-        va_end (args);
+        ms_va_end (args);
     }
 
     //
@@ -554,7 +554,7 @@ LibUninstallProtocolInterfaces (
             DEBUG((D_ERROR, "LibUninstallProtocolInterfaces: failed %g, %r\n", Protocol, Handle));
         }
     }
-    va_end (args);
+    ms_va_end (args);
 }    
 
 
@@ -610,7 +610,7 @@ LibReinstallProtocolInterfaces (
 
         Index += 1;
     }
-    va_end (args);
+    ms_va_end (args);
 
     //
     // If there was an error, undo all the interfaces that were
@@ -629,7 +629,7 @@ LibReinstallProtocolInterfaces (
 
             Index -= 1;
         }
-        va_end (args);
+        ms_va_end (args);
     }
 
     //
-- 
2.32.0

