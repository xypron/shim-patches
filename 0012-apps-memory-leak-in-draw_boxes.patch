From 21c070d233842fc9e9b7ff1ba8dfb7a6937c53de Mon Sep 17 00:00:00 2001
From: Heinrich Schuchardt <xypron.glpk@gmx.de>
Date: Wed, 23 Jun 2021 23:22:41 +0200
Subject: [PATCH 12/19] apps: memory leak in draw_boxes()

Free the buffer allocated to draw boxes.

Signed-off-by: Heinrich Schuchardt <xypron.glpk@gmx.de>
---
 apps/bltgrid.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/apps/bltgrid.c b/apps/bltgrid.c
index a0eb8c7..955d929 100644
--- a/apps/bltgrid.c
+++ b/apps/bltgrid.c
@@ -85,6 +85,7 @@ draw_boxes(EFI_GRAPHICS_OUTPUT_PROTOCOL *gop)
 				  info->HorizontalResolution,
 				  info->VerticalResolution,
 				  0);
+		FreePool(PixelBuffer);
 		return;
 	}
 	Print(L"Never found the active video mode?\n");
-- 
2.32.0

